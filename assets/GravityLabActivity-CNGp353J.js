import{d as Y,i as C,c as x,a as d,o as r,r as W,b as S,e,m as Q,_ as ee,f as M,g as te,w as se,a7 as ae,k as y,v as m,y as B,u as A,s as Z,x as E,F as le,q as oe,L as O,R as P,j as $,K as N,C as ne,U as re}from"./index-DD-2sNs0.js";import{C as ie,a as de,L as ce,P as ue,b as ge,c as pe,S as me,p as fe,d as he,e as xe,f as be}from"./index-BStlNGDR.js";import{u as ve}from"./useLabReport-DMPMx-P6.js";const we=["width","height","fill","transform"],ye={key:0},_e=e("path",{d:"M144,96a16,16,0,1,1,16,16A16,16,0,0,1,144,96Zm92-40V200a20,20,0,0,1-20,20H40a20,20,0,0,1-20-20V56A20,20,0,0,1,40,36H216A20,20,0,0,1,236,56ZM44,60v79.72l33.86-33.86a20,20,0,0,1,28.28,0L147.31,147l17.18-17.17a20,20,0,0,1,28.28,0L212,149.09V60Zm0,136H162.34L92,125.66l-48,48Zm168,0V183l-33.37-33.37L164.28,164l32,32Z"},null,-1),ke=[_e],Ve={key:1},Le=e("path",{d:"M224,56V178.06l-39.72-39.72a8,8,0,0,0-11.31,0L147.31,164,97.66,114.34a8,8,0,0,0-11.32,0L32,168.69V56a8,8,0,0,1,8-8H216A8,8,0,0,1,224,56Z",opacity:"0.2"},null,-1),Ce=e("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,16V158.75l-26.07-26.06a16,16,0,0,0-22.63,0l-20,20-44-44a16,16,0,0,0-22.62,0L40,149.37V56ZM40,172l52-52,80,80H40Zm176,28H194.63l-36-36,20-20L216,181.38V200ZM144,100a12,12,0,1,1,12,12A12,12,0,0,1,144,100Z"},null,-1),Me=[Le,Ce],Ae={key:2},Ze=e("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM156,88a12,12,0,1,1-12,12A12,12,0,0,1,156,88Zm60,112H40V160.69l46.34-46.35a8,8,0,0,1,11.32,0h0L165,181.66a8,8,0,0,0,11.32-11.32l-17.66-17.65L173,138.34a8,8,0,0,1,11.31,0L216,170.07V200Z"},null,-1),Se=[Ze],He={key:3},De=e("path",{d:"M216,42H40A14,14,0,0,0,26,56V200a14,14,0,0,0,14,14H216a14,14,0,0,0,14-14V56A14,14,0,0,0,216,42ZM40,54H216a2,2,0,0,1,2,2V163.57L188.53,134.1a14,14,0,0,0-19.8,0l-21.42,21.42L101.9,110.1a14,14,0,0,0-19.8,0L38,154.2V56A2,2,0,0,1,40,54ZM38,200V171.17l52.58-52.58a2,2,0,0,1,2.84,0L176.83,202H40A2,2,0,0,1,38,200Zm178,2H193.8l-38-38,21.41-21.42a2,2,0,0,1,2.83,0l38,38V200A2,2,0,0,1,216,202ZM146,100a10,10,0,1,1,10,10A10,10,0,0,1,146,100Z"},null,-1),Ne=[De],je={key:4},Re=e("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,16V158.75l-26.07-26.06a16,16,0,0,0-22.63,0l-20,20-44-44a16,16,0,0,0-22.62,0L40,149.37V56ZM40,172l52-52,80,80H40Zm176,28H194.63l-36-36,20-20L216,181.38V200ZM144,100a12,12,0,1,1,12,12A12,12,0,0,1,144,100Z"},null,-1),Fe=[Re],Ue={key:5},Be=e("path",{d:"M216,44H40A12,12,0,0,0,28,56V200a12,12,0,0,0,12,12H216a12,12,0,0,0,12-12V56A12,12,0,0,0,216,44ZM40,52H216a4,4,0,0,1,4,4V168.4l-32.89-32.89a12,12,0,0,0-17,0l-22.83,22.83-46.82-46.83a12,12,0,0,0-17,0L36,159V56A4,4,0,0,1,40,52ZM36,200V170.34l53.17-53.17a4,4,0,0,1,5.66,0L181.66,204H40A4,4,0,0,1,36,200Zm180,4H193l-40-40,22.83-22.83a4,4,0,0,1,5.66,0L220,179.71V200A4,4,0,0,1,216,204ZM148,100a8,8,0,1,1,8,8A8,8,0,0,1,148,100Z"},null,-1),Ee=[Be],Oe={name:"PhImage"},Pe=Y({...Oe,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(_){const b=_,k=C("weight","regular"),i=C("size","1em"),h=C("color","currentColor"),v=C("mirrored",!1),f=x(()=>b.weight??k),c=x(()=>b.size??i),u=x(()=>b.color??h),V=x(()=>b.mirrored!==void 0?b.mirrored?"scale(-1, 1)":void 0:v?"scale(-1, 1)":void 0);return(L,w)=>(r(),d("svg",Q({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:c.value,height:c.value,fill:u.value,transform:V.value},L.$attrs),[W(L.$slots,"default"),f.value==="bold"?(r(),d("g",ye,ke)):f.value==="duotone"?(r(),d("g",Ve,Me)):f.value==="fill"?(r(),d("g",Ae,Se)):f.value==="light"?(r(),d("g",He,Ne)):f.value==="regular"?(r(),d("g",je,Fe)):f.value==="thin"?(r(),d("g",Ue,Ee)):S("",!0)],16,we))}}),$e={class:"bg-indigo-600 px-6 py-4 flex justify-between items-center shrink-0"},Ie={class:"flex items-center gap-3"},ze={class:"bg-white/20 p-2 rounded-lg text-white"},Te={class:"text-lg font-bold text-white m-0"},qe={class:"flex items-center gap-4"},Ge={class:"flex items-center gap-2 bg-indigo-700/50 p-1 rounded-lg"},Je={class:"flex-1 overflow-hidden flex flex-col lg:flex-row"},Ke={class:"w-full lg:w-5/12 border-r border-slate-200 flex flex-col bg-slate-50 overflow-y-auto"},Xe={class:"p-6 space-y-6"},Ye={class:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden"},We={class:"w-full text-sm text-left"},Qe={class:"divide-y divide-slate-100"},et={class:"p-2"},tt=["onUpdate:modelValue"],st={class:"p-2"},at=["onUpdate:modelValue"],lt={class:"p-2 text-center"},ot=["onClick"],nt={key:0,class:"p-8 text-center text-slate-400 italic text-xs"},rt={class:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 space-y-3"},it=["disabled"],dt=["disabled"],ct={class:"flex-1 flex flex-col h-full overflow-hidden bg-white"},ut={class:"flex-1 p-6 relative"},gt={class:"absolute inset-4"},pt={key:0,class:"absolute inset-0 flex items-center justify-center bg-white/50 backdrop-blur-sm z-10"},mt={class:"text-center text-slate-400"},ft={class:"h-auto shrink-0 bg-slate-50 border-t border-slate-200 p-6"},ht={key:0,class:"flex flex-wrap items-center justify-between gap-6"},xt={class:"flex gap-8"},bt={class:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1"},vt={class:"text-2xl font-mono font-bold text-slate-800 flex items-baseline gap-1"},wt={class:"text-2xl font-mono font-bold text-slate-800 flex items-baseline gap-1"},yt={key:1,class:"text-center text-slate-400 italic text-sm"},_t={__name:"GravityLabActivity",props:{isOpen:Boolean,title:{type:String,default:"Labo Zwaartekracht"}},emits:["close","complete"],setup(_,{emit:b}){ie.register(de,ce,ue,ge,pe,me,fe,he,xe);const k=b,{reportData:i}=ve(),h=M(!0),v=M(null),f=M(1),c=M([]);te(()=>{i.lab.rows&&i.lab.rows.length>0?(c.value=JSON.parse(JSON.stringify(i.lab.rows)),f.value=Math.max(...c.value.map(s=>s.id))+1):V()}),se(c,s=>{i.lab.rows=JSON.parse(JSON.stringify(s)),u.value.length>=2&&h.value},{deep:!0});const u=x(()=>c.value.filter(s=>{if(!s.mass||!s.force)return!1;const t=s.mass.toString().replace(",","."),l=s.force.toString().replace(",","."),a=parseFloat(t),o=parseFloat(l);return!isNaN(a)&&!isNaN(o)&&a>0&&o>=0}).map(s=>({...s,mass:parseFloat(s.mass.toString().replace(",",".")),force:parseFloat(s.force.toString().replace(",","."))}))),V=()=>{c.value.push({id:f.value++,mass:null,force:null})},L=s=>{c.value=c.value.filter(t=>t.id!==s)},w=x(()=>{const s=u.value;if(s.length<2)return{slope:0,intercept:0,rSquared:0};const t=s.length;let l=0,a=0,o=0,g=0;s.forEach(p=>{l+=p.mass,a+=p.force,o+=p.mass*p.force,g+=p.mass*p.mass});const n=t*g-l*l;if(n===0)return{slope:0,intercept:0,rSquared:0};const H=(t*o-l*a)/n,F=(a-H*l)/t,J=a/t;let D=0,U=0;s.forEach(p=>{const X=H*p.mass+F;D+=(p.force-J)**2,U+=(p.force-X)**2});const K=D===0?1:1-U/D;return{slope:H,intercept:F,rSquared:K}}),I=x(()=>{const s=u.value,t=s.map(n=>({x:n.mass,y:n.force}));if(s.length===0)return{datasets:[]};const l=s.map(n=>n.mass),a=Math.min(...l,0),o=Math.max(...l)*1.1,g=[{x:a,y:w.value.slope*a+w.value.intercept},{x:o,y:w.value.slope*o+w.value.intercept}];return{datasets:[{label:"Metingen",data:t,backgroundColor:"#4F46E5",borderColor:"#4338CA",pointRadius:6,pointHoverRadius:8},{label:"Trendlijn",data:g,type:"line",borderColor:"#94A3B8",backgroundColor:"transparent",borderWidth:2,pointRadius:0,tension:0,borderDash:[5,5]}]}}),z=x(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{font:{family:"inherit"}}},tooltip:{callbacks:{label:s=>`m: ${s.parsed.x} kg, F: ${s.parsed.y} N`}}},scales:{x:{title:{display:!0,text:"Massa (kg)"},beginAtZero:!0},y:{title:{display:!0,text:"Zwaartekracht (N)"},beginAtZero:!0}}})),T=()=>{const s=u.value;if(s.length===0)return;const t=["Massa (kg)","Kracht (N)"],l=s.map(n=>[n.mass,n.force]);let a=t.join(",")+`
`+l.map(n=>n.join(",")).join(`
`);const o=new Blob([a],{type:"text/csv;charset=utf-8;"}),g=document.createElement("a");g.href=URL.createObjectURL(o),g.download=`metingen_${i.student.name||"student"}.csv`,g.click(),i.lab.filesDownloaded=!0},q=()=>{if(!v.value||u.value.length<2)return;const t=v.value.chart.canvas,l=document.createElement("canvas");l.width=t.width,l.height=t.height;const a=l.getContext("2d");a.fillStyle="#FFFFFF",a.fillRect(0,0,l.width,l.height),a.drawImage(t,0,0),l.toBlob(o=>{const g=URL.createObjectURL(o),n=document.createElement("a");n.href=g,n.download=`grafiek_${i.student.name||"student"}.png`,n.click(),URL.revokeObjectURL(g),i.lab.filesDownloaded=!0})};function j(){return v.value?v.value.chart.canvas.toDataURL("image/png"):null}function R(){const s=j();s&&(i.lab.chartImage=s),k("close")}function G(){const s=j();s&&(i.lab.chartImage=s),k("complete")}return(s,t)=>{const l=ae("PhTrendUp");return _.isOpen?(r(),d("div",{key:0,class:"modal-backdrop open",onClick:R},[e("div",{class:"modal-content max-w-5xl h-[90vh] flex flex-col bg-white overflow-hidden",onClick:t[2]||(t[2]=re(()=>{},["stop"]))},[e("div",$e,[e("div",Ie,[e("div",ze,[y(m(B),{weight:"fill",class:"text-xl"})]),e("div",null,[e("h3",Te,A(_.title),1),t[3]||(t[3]=e("p",{class:"text-xs text-indigo-200 m-0"},"Live Data Verwerking",-1))])]),e("div",qe,[e("div",Ge,[e("button",{onClick:t[0]||(t[0]=a=>h.value=!1),class:Z(["px-2 py-1 rounded text-xs font-bold transition-colors",h.value?"text-indigo-200 hover:text-white":"bg-white text-indigo-700 shadow-sm"])},"Basis",2),e("button",{onClick:t[1]||(t[1]=a=>h.value=!0),class:Z(["px-2 py-1 rounded text-xs font-bold transition-colors",h.value?"bg-white text-indigo-700 shadow-sm":"text-indigo-200 hover:text-white"])},"STEM",2)]),e("button",{onClick:R,class:"text-white/70 hover:text-white p-2 rounded-full transition-colors"},[y(m(E),{class:"text-2xl"})])])]),e("div",Je,[e("div",Ke,[e("div",Xe,[e("div",Ye,[e("div",{class:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50"},[t[4]||(t[4]=e("h4",{class:"font-bold text-slate-700"},"Metingen",-1)),e("button",{onClick:V,class:"text-xs font-bold text-indigo-600 bg-indigo-50 hover:bg-indigo-100 px-3 py-1.5 rounded-lg transition-colors border border-indigo-200"}," + Rij ")]),e("table",We,[t[5]||(t[5]=e("thead",{class:"text-xs text-slate-500 uppercase bg-slate-50 border-b border-slate-200"},[e("tr",null,[e("th",{class:"px-4 py-3"},"Massa (kg)"),e("th",{class:"px-4 py-3"},"Kracht (N)"),e("th",{class:"px-4 py-3 w-10"})])],-1)),e("tbody",Qe,[(r(!0),d(le,null,oe(c.value,a=>(r(),d("tr",{key:a.id,class:"hover:bg-slate-50"},[e("td",et,[O(e("input",{"onUpdate:modelValue":o=>a.mass=o,type:"text",inputmode:"decimal",placeholder:"0.00",class:"w-full px-2 py-1.5 bg-slate-50 border border-slate-200 rounded focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none font-mono text-slate-700"},null,8,tt),[[P,a.mass]])]),e("td",st,[O(e("input",{"onUpdate:modelValue":o=>a.force=o,type:"text",inputmode:"decimal",placeholder:"0.00",class:"w-full px-2 py-1.5 bg-slate-50 border border-slate-200 rounded focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none font-mono text-slate-700"},null,8,at),[[P,a.force]])]),e("td",lt,[e("button",{onClick:o=>L(a.id),class:"text-slate-400 hover:text-red-500 transition-colors"},[y(m(E))],8,ot)])]))),128))])]),c.value.length===0?(r(),d("div",nt," Nog geen metingen. ")):S("",!0)]),e("div",rt,[t[8]||(t[8]=e("h4",{class:"text-xs font-bold uppercase text-slate-400 tracking-wider mb-2"},"Downloads",-1)),e("button",{onClick:T,disabled:u.value.length===0,class:Z(["w-full flex items-center justify-center gap-2 py-2.5 rounded-lg border-2 font-bold text-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed",m(i).lab.filesDownloaded?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-600 hover:border-indigo-300"])},[m(i).lab.filesDownloaded?(r(),$(m(ne),{key:1,weight:"fill",class:"text-lg"})):(r(),$(m(B),{key:0,class:"text-lg"})),t[6]||(t[6]=N(" CSV Downloaden ",-1))],10,it),e("button",{onClick:q,disabled:u.value.length<2,class:Z(["w-full flex items-center justify-center gap-2 py-2.5 rounded-lg border-2 font-bold text-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed",m(i).lab.filesDownloaded?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-600 hover:border-indigo-300"])},[y(m(Pe),{class:"text-lg"}),t[7]||(t[7]=N(" Grafiek Downloaden (PNG) ",-1))],10,dt),t[9]||(t[9]=e("p",{class:"text-[10px] text-slate-400 text-center"}," Deze bestanden heb je nodig voor je verslag! ",-1))])])]),e("div",ct,[e("div",ut,[e("div",gt,[y(m(be),{ref_key:"chartRef",ref:v,data:I.value,options:z.value},null,8,["data","options"])]),u.value.length<2?(r(),d("div",pt,[e("div",mt,[y(l,{class:"text-4xl mx-auto mb-2 opacity-50"}),t[10]||(t[10]=e("p",null,"Voer minstens 2 punten in...",-1))])])):S("",!0)]),e("div",ft,[u.value.length>=2?(r(),d("div",ht,[e("div",xt,[e("div",null,[e("p",bt,A(h.value?"Richtingscoëfficiënt (a)":"Helling"),1),e("div",vt,[N(A(w.value.slope.toFixed(2))+" ",1),t[11]||(t[11]=e("span",{class:"text-xs text-slate-500 font-sans"},"N/kg",-1))])]),e("div",null,[t[12]||(t[12]=e("p",{class:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1"}," Nauwkeurigheid (R²) ",-1)),e("div",wt,A(w.value.rSquared.toFixed(3)),1)])]),e("button",{onClick:G,class:"px-8 py-3 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-xl shadow-lg shadow-indigo-200 transition-all ml-auto"}," Klaar & Opslaan ")])):(r(),d("div",yt," Analyseresultaten verschijnen hier zodra je data hebt. "))])])])])])):S("",!0)}}},Ct=ee(_t,[["__scopeId","data-v-96446c2d"]]);export{Ct as default};
